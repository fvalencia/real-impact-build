{"version":3,"sources":["scripts/app.js"],"names":["Correlation","x","y","this","Matrix","DataPoint","PolynomialRegression","theData","degrees","data","degree","matrix","leftMatrix","rightMatrix","generateLeftMatrix","generateRightMatrix","angular","module","headerDirective","templateUrl","directive","svgAnimationDirective","HomeController","$log","$timeout","HistoricFlightsFactory","$mdDialog","GraphBuilderFactory","$mdToast","$anchorScroll","$location","initController","getAirPorts","then","airtports","vm","airports","getDistanceDelays","result","correlationData","paintGraph","querySearch","query","filter","element","name","toLowerCase","search","id","getAnalythics","fromItem","toItem","getDelaysOnMonthPer","per","units","length","chartVisible","showAlertDialog","getDistanceFromTo","distance","message","Math","round","getPredictedY","showToast","currentList","showOpts","month","getMonth","changeUnits","map","e","value","delays","ratios","changePer","type","graphBuilded","discreteBarChart","options","lineChart","options2","data2","months","title","text","show","alert","parent","document","querySelector","clickOutsideToClose","textContent","ariaLabel","ok","simple","position","hideDelay","highlightClass","action","changeScroll","hash","$inject","controller","$http","$q","initData","method","url","self","err","initDataAirports","dataAirports","deferred","defer","currentCodes","forEach","obj","i","hasOwnProperty","indexOf","push","getNameByCode","resolve","promise","code","find","from","to","getDataFromTo","dataFromTo","groupBy","groupedData","values","day","getAvg","label","split","hour","toString","slice","list","key","group","distances","toAnalyze","parseInt","poly","terms","getTerms","regressionData","row","j","predictY","array","sum","total","factory","opts","chart","height","margin","d","showValues","valueFormat","d3","format","color","max","maxDelayMinutes","maxDelayPercent","min","midDelayMinutes","midDelayPercent","red","yellow","green","duration","delay","xAxis","axisLabel","axisLabelDistance","tickFormat","yAxis","tooltip","classes","valueFormatter","keyFormatter","enable","className","subtitle","useInteractiveGuideline","showLegend","strokeWidth","top","right","bottom","left","prototype","correlationCoefficient","diffFromAvg","sqrt","diffFromAvgSqrd","X","Y","avg","aList","stdv","b0","b1","pow","sumList","sumSquares","sumXTimesY","linearRegression","independentVariable","backwardSubstitution","anyMatrix","arr","col","rows","cols","current","counter","combineMatrices","returnMatrix","forwardElimination","aMatrix","z","numerator","denominator","gaussianJordanElimination","combined","fwdIntegration","identityMatrix","matrixProduct","matrix1","matrix2","numCols1","numRows2","product","doMultiplication","numCol","multiplyRow","rowNum","multiplier","mMatrix","sumX","anyData","power","sumY","runBlock","debug","run","routerConfig","$stateProvider","$urlRouterProvider","state","controllerAs","initDataAirtports","otherwise","config","constant","$logProvider","$mdThemingProvider","myStyle","extendPalette","contrastDefaultColor","definePalette","theme","primaryPalette","debugEnabled","$templateCache","put"],"mappings":"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","file":"scripts/app-5f4cd49ccb.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('real-impact', ['ngAnimate', 'ngSanitize', 'ui.router', 'ngMaterial', 'nvd3']);\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('real-impact')\n    .directive('headerApp', headerDirective);\n\n  /** @ngInject */\n  function headerDirective() {\n      return {\n        templateUrl: 'app/commons/layout/header/header.html',\n      }\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('real-impact')\n    .directive('svgAnimation', svgAnimationDirective);\n\n  /** @ngInject */\n  function svgAnimationDirective() {\n      return {\n        templateUrl: 'app/commons/directives/svg-animation/svg-animation.html',\n      }\n    }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('real-impact')\n    .controller('HomeController', HomeController);\n\n  /** @ngInject */\n  function HomeController($log, $timeout, HistoricFlightsFactory, $mdDialog, GraphBuilderFactory, $mdToast, $anchorScroll, $location) {\n    var vm = this;\n\n    vm.airports = [];\n    vm.units = 'minutes';\n    vm.per = 'hours';\n    vm.chartVisible = true;\n\n    vm.initController = initController;\n    vm.querySearch = querySearch;\n    vm.getAnalythics = getAnalythics;\n    vm.changeUnits = changeUnits;\n    vm.changePer = changePer;\n    vm.changeScroll = changeScroll;\n\n    initController();\n\n    function initController() {\n      HistoricFlightsFactory.getAirPorts().then(function(airtports){\n        vm.airports = airtports;\n      });\n\n      HistoricFlightsFactory.getDistanceDelays('01').then(function(result){\n        vm.correlationData = result;\n        paintGraph('lineChart');\n      });\n\n    }\n\n    function querySearch(query) {\n      return query\n              ? vm.airports.filter(function(element) {\n                return (element.name.toLowerCase().search(query.toLowerCase()) > -1 || element.id.toLowerCase().search(query.toLowerCase()) > -1);\n              })\n              : vm.airports;\n    }\n\n    function getAnalythics(){\n      if(vm.fromItem && vm.fromItem.id && vm.toItem && vm.toItem.id){\n        //We sent the month, emulating user input\n        HistoricFlightsFactory.getDelaysOnMonthPer('01', vm.per,vm.fromItem.id, vm.toItem.id, vm.units).then(function(result){\n\n          if(result.length === 0){\n            vm.chartVisible = false;\n            showAlertDialog('Alert', 'Not Data Found');\n          }else{\n            vm.chartVisible = true;\n          }\n\n          HistoricFlightsFactory.getDistanceFromTo('01',vm.fromItem.id, vm.toItem.id).then(function(distance){\n            var message = 'Flight Distance: '+distance;\n            message+= 'mi, with a predicted delay of: '+Math.round(HistoricFlightsFactory.getPredictedY(distance))+' Minutes';\n            showToast(message);\n          });\n\n          vm.currentList = result;\n          vm.showOpts = {\n            month: getMonth('01'),\n            units: vm.units,\n            per: vm.per\n          }\n          paintGraph('discreteBarChart');\n        });\n\n      }else{\n        showAlertDialog('Error', 'Please select a From and a To Airports');\n      }\n    }\n\n    function changeUnits() {\n\n      if(vm.currentList){\n        if(vm.units === 'minutes'){\n          vm.currentList = vm.currentList.map(function (e) {\n            e.value = e.delays;\n            return e;\n          });\n        }else{\n          vm.currentList = vm.currentList.map(function (e) {\n            e.value = e.ratios;\n            return e;\n          });\n        }\n        vm.showOpts.units = vm.units;\n        paintGraph('discreteBarChart');\n      }\n    }\n\n    function changePer(){\n      getAnalythics();\n    }\n\n    function paintGraph(type) {\n      if(type === 'discreteBarChart'){\n        var graphBuilded = GraphBuilderFactory.discreteBarChart(vm.currentList, vm.showOpts);\n        vm.options = graphBuilded.options;\n        vm.data = graphBuilded.data;\n      }\n\n      if(type === 'lineChart'){\n        var graphBuilded = GraphBuilderFactory.lineChart(vm.correlationData);\n        vm.options2 = graphBuilded.options;\n        vm.data2 = graphBuilded.data;\n      }\n    }\n\n    function getMonth(month){\n      var months = [];\n      months['01'] = 'January';\n      months['02'] = 'February';\n      months['03'] = 'March';\n      months['04'] = 'April';\n      months['05'] = 'May';\n      months['06'] = 'June';\n      months['07'] = 'July';\n      months['08'] = 'August';\n      months['09'] = 'September';\n      months['10'] = 'October';\n      months['11'] = 'November';\n      months['12'] = 'December';\n\n      return months[month];\n    }\n\n    function showAlertDialog(title, text){\n      $mdDialog.show(\n      $mdDialog.alert()\n          .parent(angular.element(document.querySelector('.site')))\n          .clickOutsideToClose(true)\n          .title(title)\n          .textContent(text)\n          .ariaLabel('Alert Dialog')\n          .ok('Got it!')\n      );\n    }\n\n    function showToast(message) {\n      $mdToast.show(\n        $mdToast.simple()\n          .textContent(message)\n          .position('top bottom')\n          .hideDelay(0)\n          .highlightClass('md-primary')\n          .action('CLOSE')\n      );\n\n    };\n\n    function changeScroll(){\n      $timeout(function(){\n        $location.hash('crr');\n        $anchorScroll();\n      },200);\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n      .module('real-impact')\n      .factory('HistoricFlightsFactory', HistoricFlightsFactory);\n\n  /** @ngInject */\n  function HistoricFlightsFactory($http, $q) {\n\n    var self = this;\n    self.data = null;\n    self.dataAirports = null;\n    self.airports = null;\n\n    return {\n          initData: initData,\n          initDataAirports: initDataAirports,\n          getAirPorts: getAirPorts,\n          getDelaysOnMonthPer: getDelaysOnMonthPer,\n          getDistanceDelays: getDistanceDelays,\n          getDistanceFromTo: getDistanceFromTo,\n          getPredictedY: getPredictedY\n    };\n\n    function initData(){\n      return $http({\n          method: 'GET',\n          url: 'assets/data/historic-data.json'\n        }).then(function(result){\n          self.data = result.data;\n        }, function (err) {\n          self.data = null;\n        });\n    }\n\n    function initDataAirports() {\n      return $http({\n          method: 'GET',\n          url: 'assets/data/airports.json'\n        }).then(function(result){\n          self.dataAirports = result.data;\n        }, function (err) {\n          self.dataAirports = null;\n        });\n    }\n\n    function getAirPorts() {\n\n      var deferred = $q.defer(), currentCodes = [];\n\n      self.airports = [];\n\n      self.data.forEach(function(obj, i) {\n        if (obj.hasOwnProperty('DEST') && currentCodes.indexOf(obj['DEST']) === -1) {\n          currentCodes.push(obj['DEST']);\n          self.airports.push({\n            id: obj['DEST'],\n            name: getNameByCode(obj['DEST']).name\n          });\n        }\n        if (obj.hasOwnProperty('ORIGIN') && currentCodes.indexOf(obj['ORIGIN']) === -1) {\n          currentCodes.push(obj['ORIGIN']);\n          self.airports.push({\n            id: obj['ORIGIN'],\n            name: getNameByCode(obj['ORIGIN']).name\n          });\n        }\n\n        if(i === self.data.length - 1 ){\n          deferred.resolve( self.airports );\n        }\n      });\n\n      return deferred.promise;\n\n    }\n\n    function getNameByCode(code){\n      return self.dataAirports.find(function(element) {\n        return element.code === code;\n      })\n    }\n\n    function getDelaysOnMonthPer(month, per, from, to, units) {\n      var deferred = $q.defer(), matches = {};\n\n      var key, currentMonth;\n\n      getDataFromTo(from, to, month).then(function(dataFromTo) {\n\n        if(dataFromTo.length > 0){\n\n          if(per === 'days'){\n            groupBy(dataFromTo, 'FL_DATE').then(function (groupedData) {\n              var values = [], delays, ratios;\n              for (var day in groupedData) {\n                delays = getAvg(groupedData[day].delays);\n                ratios = getAvg(groupedData[day].ratios);\n                values.push({\n                  label: day.split(\"-\")[2],\n                  delays: delays,\n                  ratios: ratios,\n                  value: ((units === 'minutes')?delays:ratios)\n                });\n              };\n              deferred.resolve(values);\n            });\n          }else{\n            groupBy(dataFromTo, 'CRS_DEP_TIME').then(function (groupedData) {\n              var values = [], delays, ratios, label;\n              for (var hour in groupedData) {\n                delays = getAvg(groupedData[hour].delays);\n                ratios = getAvg(groupedData[hour].ratios);\n                label = hour.toString();\n                label = (label.length === 3)?('0'+label):label;\n                label = label.slice(0, 2) + \":\" + label.slice(2);\n                if(label.length == 5)\n                  values.push({\n                    label: label,\n                    delays: delays,\n                    ratios: ratios,\n                    value: ((units === 'minutes')?delays:ratios)\n                  });\n              };\n              deferred.resolve(values);\n            });\n          }\n\n        }else{\n          deferred.resolve([]);\n        }\n\n      });\n\n      return deferred.promise;\n\n    }\n\n    function getDataFromTo(from, to, month) {\n      var deferred = $q.defer(), result = [];\n      self.data.forEach(function(obj, i) {\n        if(obj['ORIGIN'] === from && obj['DEST'] === to && obj['FL_DATE'].split(\"-\")[1] === month){\n          result.push(obj);\n        }\n\n        if(i === self.data.length - 1 ){\n          deferred.resolve(result);\n        }\n\n      });\n      return deferred.promise;\n    }\n\n    function groupBy(list, groupBy) {\n      var deferred = $q.defer();\n      var key, group = {};\n\n      list.forEach(function (element, i) {\n        key = element[groupBy];\n        if(!group[key]){\n          group[key] = { delays: [], ratios: [] };\n        }\n\n        group[key].delays.push(element['ARR_DELAY']);\n        group[key].ratios.push((element['ARR_DELAY']/element['CRS_ELAPSED_TIME']) * 100);\n\n        if(i === list.length - 1 ){\n          deferred.resolve(group);\n        }\n\n      });\n\n      return deferred.promise;\n    }\n\n    function getDistanceDelays(month, units) {\n      var deferred = $q.defer(), distance ,distances = [];\n      self.data.find(function(obj, i) {\n\n        distance = obj['DISTANCE'];\n\n        if(obj['FL_DATE'].split(\"-\")[1] === month){\n          if(!distances[distance]){\n            distances[distance] = { delays: [] };\n          }\n          distances[distance].delays.push(obj['ARR_DELAY']);\n        }\n\n        if(i === self.data.length - 1 ){\n          var values = [], delays, toAnalyze = [];\n          for (var distance in distances) {\n            delays = getAvg(distances[distance].delays);\n            values.push(new DataPoint(parseInt(distance), delays));\n            toAnalyze.push({ x: parseInt(distance)});\n          };\n\n          self.poly = new PolynomialRegression(values, 40);\n          self.terms = self.poly.getTerms();\n          var regressionData = [];\n\n          toAnalyze.forEach(function(row, j){\n            regressionData.push({x: row.x, y: self.poly.predictY(self.terms, row.x)});\n            if(j === toAnalyze.length - 1 ){\n              deferred.resolve(regressionData);\n            }\n          });\n        }\n      });\n\n      return deferred.promise;\n    }\n\n    function getPredictedY(distance) {\n      return self.poly.predictY(self.terms, distance);\n    }\n\n    function getDistanceFromTo(month, from, to) {\n      var deferred = $q.defer(), distance = null;\n      self.data.forEach(function(obj, i) {\n        if(obj['ORIGIN'] === from && obj['DEST'] === to && obj['FL_DATE'].split(\"-\")[1] === month){\n          distance = obj['DISTANCE'];\n          deferred.resolve(distance);\n          return distance;\n        }\n      });\n      return deferred.promise;\n    }\n\n    function getAvg(array) {\n      var sum = 0;\n      var total = 0;\n\n      for( var i = 0; i < array.length; i++ ){\n        if(array[i] !== \"\"){\n          total++;\n          sum += array[i];\n        }\n      }\n      return total > 0 ? sum/total : 0;\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n      .module('real-impact')\n      .factory('GraphBuilderFactory', GraphBuilderFactory);\n\n  /** @ngInject */\n  function GraphBuilderFactory() {\n\n    var self = this;\n\n    self.height = 450;\n    self.margin = {\n        top: 40,\n        right: 20,\n        bottom: 70,\n        left: 70\n    };\n    self.maxDelayMinutes = 20;\n    self.midDelayMinutes = 10;\n    self.maxDelayPercent = 15;\n    self.midDelayPercent = 8;\n    self.red = '#f44336';\n    self.yellow = '#ffeb3b';\n    self.green = '#4caf50';\n    self.delay = 200;\n\n    return {\n      discreteBarChart: discreteBarChart,\n      lineChart: lineChart\n    };\n\n    function discreteBarChart(values, opts) {\n\n      var options = {\n        chart: {\n            type: 'discreteBarChart',\n            height: self.height,\n            margin : self.margin,\n            x: function(d){ return d.label; },\n            y: function(d){ return d.value; },\n            showValues: true,\n            valueFormat: function(d){\n                return d3.format(',.0f')(d)+((opts.units === 'ratio')?'%':'');\n            },\n            color: function (d, i) {\n                var max = ((opts.units === 'minutes')?self.maxDelayMinutes:self.maxDelayPercent);\n                var min = ((opts.units === 'minutes')?self.midDelayMinutes:self.midDelayPercent);\n                if (d.value > max){\n                  return self.red;\n                }else if(d.value > min){\n                  return self.yellow;\n                }else{\n                  return self.green;\n                }\n            },\n            duration: self.delay,\n            xAxis: {\n                axisLabel: ((opts.per === 'days')?'Departure Day':'Departure Hour'),\n                axisLabelDistance: 10,\n                tickFormat:function(d, i){\n                  if(opts.per === 'hours'){\n                    return ((i % 3 === 0)?d:'');\n                  }else{\n                    return d;\n                  }\n                },\n            },\n            yAxis: {\n                axisLabel: 'Arrival Delay '+((opts.units === 'minutes')?'(Minutes)':'Ratio %'),\n                axisLabelDistance: 0,\n                tickFormat:function(d, i){\n                  return d3.format(',.0f')(d) + ((opts.units === 'ratio')?'%':'');\n                }\n            },\n            tooltip:{\n              classes: 'graph-tooltip md-whiteframe-z1',\n              valueFormatter: function (d, i) {\n                return d3.format(',.0f')(d)+(((opts.units === 'minutes')?' Minutes':'%')+' of arrival delay');\n              },\n              keyFormatter:function (d, i) {\n                return 'on '+opts.month+' '+d;\n              }\n            }\n        },\n        title:{\n          enable: true,\n          text: \"Flights arrival delay per departure \"+((opts.per === 'days')?'day':'hour')+\" on \"+opts.month,\n          className: \"graph-title\"\n        },\n        subtitle:{\n          enable: true,\n          text: \"Higher columns means more delay\",\n          className: \"graph-subtitle\"\n        }\n      };\n\n      var data = [\n        {\n            key: '01',\n            values: values\n        }\n      ];\n\n      return {\n        options: options,\n        data: data\n      };\n\n    }\n\n    function lineChart(values) {\n\n      var options = {\n          chart: {\n              type: 'lineChart',\n              height: self.height,\n              margin : self.margin,\n              x: function(d){ return d.x; },\n              y: function(d){ return d.y; },\n              useInteractiveGuideline: true,\n              showLegend: false,\n              xAxis: {\n                  axisLabel: 'Distance of Flight'\n              },\n              yAxis: {\n                  axisLabel: 'Delay in Minutes',\n                  tickFormat: function(d){\n                      return d3.format('.0f')(d);\n                  },\n                  axisLabelDistance: -10\n              }\n          },\n          title:{\n            enable: true,\n            text: \"Correlation Between Arrival Delay and Distance\",\n            className: \"graph-title\"\n          },\n          subtitle:{\n            enable: true,\n            text: \"Calculed using a Polynomial Regression\",\n            className: \"graph-subtitle\"\n          }\n      };\n\n      var data = [\n        {\n          values: values,\n          key: 'Delay in Minutes: ',\n          color: 'rgb(255,152,0)',\n          strokeWidth: 2,\n        }\n      ]\n\n      return {\n        options: options,\n        data: data\n      };\n\n    }\n\n\n  }\n\n})();\n\n\n/**\n * constructs a Correlation object with a few public methods for analyzing data sets\n * @param x - an array of Numbers\n * @param y - an array of Numbers\n * @constructor\n */\nfunction Correlation(x, y){\n    this.x       = x;\n    this.y       = y;\n}\n\n/**\n * Gets the correlation coefficient of 2 lists\n * @returns {number}\n */\nCorrelation.prototype.correlationCoefficient = function(){\n    return this.diffFromAvg() / (Math.sqrt(this.diffFromAvgSqrd(X) * this.diffFromAvgSqrd(Y)));\n};\n\n\n/**\n * get the average of a list\n * @param aList - array\n * @returns {number}\n */\nCorrelation.prototype.avg = function(aList){\n    var sum = 0;\n    for(var i = 0; i < aList.length; i++){\n        sum += aList[i];\n    }\n    return sum / aList.length;\n};\n\n/**\n * gets the standard deviation of an array\n * @param aList\n * @returns {number}\n */\nCorrelation.prototype.stdv = function(aList){\n    return Math.sqrt(this.diffFromAvgSqrd(aList) / (aList.length - 1));\n};\n\n/**\n * The B part of the regression equation -> y = mx + B\n * @returns {number}\n */\nCorrelation.prototype.b0 = function(){\n    return this.avg(this.y) - this.b1() * this.avg(this.x);\n};\n\n/**\n * the M part of the regression equation -> y = Mx + b\n * @returns {number}\n */\nCorrelation.prototype.b1 = function(){\n    return this.diffFromAvg() / this.diffFromAvgSqrd(X);\n};\n\n\n/**\n * gets the sum of (Xi - Mx)(Yi - My)\n * @returns {number}\n */\nCorrelation.prototype.diffFromAvg = function(){\n    var sum = 0;\n    for(var i = 0; i < this.x.length; i++){\n        sum += (this.x[i] - this.avg(x)) * (y[i] - this.avg(y));\n    }\n    return sum;\n};\n\n/**\n * Returns the sum of (Xi - Mx)^2\n * @param aList\n * @returns {number}\n */\nCorrelation.prototype.diffFromAvgSqrd = function(aList){\n    var sum = 0;\n    for(var i = 0; i < aList.length; i++){\n        sum += Math.pow((aList[i] - this.avg(aList)), 2);\n    }\n    return sum;\n};\n\n/**\n * Gets the sum of a list\n * @param aList\n * @returns {number}\n */\nCorrelation.prototype.sumList = function(aList){\n    var sum = 0;\n\n    for(var i = 0; i < aList.length; i++){\n        sum += aList[i];\n    }\n    return sum;\n};\n\n/**\n * sum of each list item squared\n * @param aList\n * @returns {number}\n */\nCorrelation.prototype.sumSquares = function(aList){\n    var sum = 0;\n\n    for(var i = 0; i < aList.length; i++){\n        sum += Math.pow(aList[i], 2);\n    }\n    return sum;\n};\n\nCorrelation.prototype.sumXTimesY = function(){\n    var sum = 0;\n\n    for(var i = 0; i < this.x.length; i++){\n        sum += (this.y[i] * this.x[i]);\n    }\n    return sum;\n};\n\n/**\n * Gives the predicted value of the dependent variable based on the independent variable.\n * The equation is in the from y = mx + b\n * @param independentVariable\n * @returns {number}\n */\nCorrelation.prototype.linearRegression = function(independentVariable){\n    return this.b1() * independentVariable + this.b0();\n};\n\nfunction Matrix(){\n\n}\n\n/**\n * performs backward substitution on a matrix\n * @param anyMatrix - a matrix that has already undergone forward substitution\n * @param arr - an array that will ultimately be the final output for A0 - Ak\n * @param row - last row index\n * @param col - column index\n * @returns {*}\n */\nMatrix.prototype.backwardSubstitution = function(anyMatrix, arr, row, col){\n\n    if(row < 0 || col < 0){\n        return arr;\n    } else{\n        var rows = anyMatrix.length;\n        var cols = anyMatrix[0].length - 1;\n        var current = 0;\n        var counter = 0;\n\n        for(var i = cols - 1; i >= col; i--){\n\n            if(i == col){\n                current = anyMatrix[row][cols] / anyMatrix[row][i];\n\n\n            } else{\n                anyMatrix[row][cols] -= anyMatrix[row][i] * arr[rows - 1 - counter];\n                counter++;\n            }\n        }\n\n        arr[row] = current;\n        return this.backwardSubstitution(anyMatrix, arr, row - 1, col - 1);\n    }\n};\n\n\n/**\n * Combines a square matrix with a matrix with K rows and only 1 column for GJ Elimination\n * @param left\n * @param right\n * @returns {*[]}\n */\nMatrix.prototype.combineMatrices = function(left, right){\n\n    var rows = right.length;\n    var cols = left[0].length;\n    var returnMatrix = [];\n\n    for (var i = 0; i < rows; i++) {\n        returnMatrix.push([]);\n\n        for (var j = 0; j <= cols; j++) {\n\n            if (j == cols) {\n\n                returnMatrix[i][j] = right[i];\n\n            } else {\n\n                returnMatrix[i][j] = left[i][j];\n            }\n        }\n    }\n\n    return returnMatrix;\n};\n\n/**\n * Performs forward elimination for GJ elimination to form an upper right triangle matrix\n * @param anyMatrix\n * @returns {*[]}\n */\nMatrix.prototype.forwardElimination = function(anyMatrix){\n\n    var rows        = anyMatrix.length;\n    var cols        = anyMatrix[0].length;\n    var aMatrix     = [];\n    //returnMatrix = anyMatrix;\n    for (var i = 0; i < rows; i++) {\n\n        aMatrix.push([]);\n\n        for (var j = 0; j < cols; j++) {\n            aMatrix[i][j] = anyMatrix[i][j];\n        }\n    }\n\n    for (var x = 0; x < rows - 1; x++) {\n\n        for (var z = x; z < rows - 1; z++) {\n\n            var numerator   = aMatrix[z + 1][x];\n            var denominator = aMatrix[x][x];\n            var result      = numerator / denominator;\n\n\n            for (var i = 0; i < cols; i++) {\n\n                aMatrix[z + 1][i] = aMatrix[z + 1][i] - (result * aMatrix[x][i]);\n            }\n        }\n    }\n    return aMatrix;\n};\n\n/**\n * THIS METHOD ACTS LIKE A CONTROLLER AND PERFORMS ALL THE NECESSARY STEPS OF GJ ELIMINATION TO PRODUCE\n * THE TERMS NECESSARY FOR POLYNOMIAL REGRESSION USING THE LEAST SQUARES METHOD WHERE SUM(RESIDUALS) = 0\n * @param leftMatrix\n * @param rightMatrix\n * @returns {*}\n */\nMatrix.prototype.gaussianJordanElimination = function(leftMatrix, rightMatrix){\n\n    var combined        = this.combineMatrices(leftMatrix, rightMatrix);\n    var fwdIntegration  = this.forwardElimination(combined);\n    //NOW, FINAL STEP IS BACKWARD SUBSTITUTION WHICH RETURNS THE TERMS NECESSARY FOR POLYNOMIAL REGRESSION\n    return this.backwardSubstitution(fwdIntegration, [], fwdIntegration.length - 1, fwdIntegration[0].length - 2);\n};\n\n/**\n * returns the identity matrix for a matrix such that anyMatrix * identitymatrix = anyMatrix\n * This is useful for inverting a matrix\n * @param anyMatrix\n * @returns {*[]}\n */\nMatrix.prototype.identityMatrix = function(anyMatrix){\n\n    var rows = anyMatrix.length;\n    var cols = anyMatrix[0].length;\n    var identityMatrix = [[]];\n\n    for (var i = 0; i < rows; i++) {\n        for (var j = 0; j < cols; j++) {\n            if (j == i) {\n                identityMatrix[i][j] = 1;\n            } else {\n                identityMatrix[i][j] = 0;\n            }\n        }\n    }\n    return identityMatrix;\n};\n\n\n/**\n * calculates the product of 2 matrices\n * @param matrix1\n * @param matrix2\n * @returns {*}\n */\nMatrix.prototype.matrixProduct = function(matrix1, matrix2){\n    var numCols1 = matrix1[0].length;\n    var numRows2 = matrix2.length;\n\n    if(numCols1 != numRows2){\n        return false;\n    }\n\n    var product = [[]];\n\n    for (var rows = 0; rows < numRows2; rows++) {\n        for (var cols = 0; cols < numCols1; cols++) {\n            product[rows][cols] = this.doMultiplication(matrix1, matrix2, rows,\n                cols, numCols1);\n        }\n    }\n    return product;\n};\n\n/**\n * performs multiplication for an individual matrix cell\n * @param matrix1\n * @param matrix2\n * @param row\n * @param col\n * @param numCol\n * @returns {number}\n */\nMatrix.prototype.doMultiplication = function(matrix1, matrix2, row, col, numCol){\n    var counter = 0;\n    var result = 0;\n    while (counter < numCol) {\n        result += matrix1[row][counter] * matrix2[counter][col];\n        counter++;\n    }\n    return result;\n};\n\n\n/**\n * Multiplies a row of a matrix - 1 of the fundamental matrix operations\n * @param anyMatrix\n * @param rowNum\n * @param multiplier\n * @returns {*[]}\n */\nMatrix.prototype.multiplyRow = function(anyMatrix, rowNum, multiplier){\n    var rows = anyMatrix.length;\n    var cols = anyMatrix[0].length;\n    var mMatrix = [[]];\n\n    for (var i = 0; i < rows; i++) {\n        for (var j = 0; j < cols; j++) {\n            if (i == rowNum) {\n                mMatrix[i][j] = anyMatrix[i][j] * multiplier;\n            } else {\n                mMatrix[i][j] = anyMatrix[i][j];\n            }\n        }\n    }\n\n    return mMatrix;\n};\n\n/**\n * Simple data point object for use as a consistent data storage mechanism\n * @param x\n * @param y\n * @constructor\n */\nfunction DataPoint(x,y){\n    this.x = x;\n    this.y = y;\n}\n\n\n/**\n * The constructor for a PolynomialRegression object an example of it's usage is below\n * @param theData\n * @param degrees\n * @constructor\n */\nfunction PolynomialRegression(theData, degrees){\n\n\n    //private object variables\n    this.data        = theData;\n    this.degree      = degrees;\n    this.matrix      = new Matrix();\n    this.leftMatrix  = [];\n    this.rightMatrix = [];\n\n    this.generateLeftMatrix();\n    this.generateRightMatrix();\n}\n\n/**\n * Sums up all x coordinates raised to a power\n * @param anyData\n * @param power\n * @returns {number}\n */\nPolynomialRegression.prototype.sumX = function(anyData, power){\n    var sum = 0;\n    for (var i = 0; i < anyData.length; i++) {\n        sum += Math.pow(anyData[i].x, power);\n    }\n    return sum;\n};\n\n\n/**\n * sums up all x * y where x is raised to a power\n * @param anyData\n * @param power\n * @returns {number}\n */\nPolynomialRegression.prototype.sumXTimesY = function(anyData, power){\n    var sum = 0;\n    for (var i = 0; i < anyData.length; i++) {\n        sum += Math.pow(anyData[i].x, power) * anyData[i].y;\n    }\n    return sum;\n};\n\n\n/**\n * Sums up all Y's raised to a power\n * @param anyData\n * @param power\n * @returns {number}\n */\nPolynomialRegression.prototype.sumY = function(anyData, power){\n    var sum = 0;\n    for (var i = 0; i < anyData.length; i++) {\n        sum += Math.pow(anyData[i].y, power);\n    }\n    return sum;\n};\n\n/**\n * generate the left matrix\n */\nPolynomialRegression.prototype.generateLeftMatrix = function(){\n    for (var i = 0; i <= this.degree; i++) {\n        this.leftMatrix.push([]);\n        for (var j = 0; j <= this.degree; j++) {\n            if (i === 0 && j === 0) {\n                this.leftMatrix[i][j] = this.data.length;\n            } else {\n                this.leftMatrix[i][j] = this.sumX(this.data, (i + j));\n            }\n        }\n    }\n};\n\n/**\n * generates the right hand matrix\n */\nPolynomialRegression.prototype.generateRightMatrix = function(){\n    for (var i = 0; i <= this.degree; i++) {\n        if (i === 0) {\n            this.rightMatrix[i] = this.sumY(this.data, 1);\n        } else {\n            this.rightMatrix[i] = this.sumXTimesY(this.data, i);\n        }\n    }\n};\n\n\n/**\n * gets the terms for a polynomial\n * @returns {*}\n */\nPolynomialRegression.prototype.getTerms = function(){\n    return this.matrix.gaussianJordanElimination(this.leftMatrix, this.rightMatrix);\n};\n\n/**\n * Predicts the Y value of a data set based on polynomial coefficients and the value of an independent variable\n * @param terms\n * @param x\n * @returns {number}\n */\nPolynomialRegression.prototype.predictY = function(terms, x){\n\n    var result = 0;\n    for (var i = terms.length - 1; i >= 0; i--) {\n        if (i == 0) {\n            result += terms[i];\n        } else {\n            result += terms[i] * Math.pow(x, i);\n        }\n    }\n    return result;\n};\n\n(function() {\n  'use strict';\n\n  angular\n    .module('real-impact')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n    $log.debug('Run Real-impact...');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('real-impact')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        templateUrl: 'app/states/home/home.html',\n        controller: 'HomeController',\n        controllerAs: 'homeCtrl',\n        resolve:{\n          initData: function (HistoricFlightsFactory) {\n            return HistoricFlightsFactory.initData();\n          },\n          initDataAirtports: function (HistoricFlightsFactory) {\n            return HistoricFlightsFactory.initDataAirports();\n          }\n        }\n      });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('real-impact')\n    .constant('SITE_NAME', 'Real Impact');\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('real-impact')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, $mdThemingProvider) {\n    // Enable log\n    var myStyle = $mdThemingProvider.extendPalette('orange', {\n      'contrastDefaultColor': 'light'\n    });\n\n    $mdThemingProvider.definePalette('myStyle', myStyle);\n\n    $mdThemingProvider.theme('default')\n    .primaryPalette('myStyle');\n\n    $logProvider.debugEnabled(true);\n  }\n\n})();\n\nangular.module(\"real-impact\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/states/home/home.html\",\"<md-content class=\\\"md-padding home-view\\\"><form ng-submit=$event.preventDefault() class=main-form><div layout=row layout-align=\\\"center center\\\"><div><md-autocomplete md-selected-item=homeCtrl.fromItem md-search-text=homeCtrl.searchTextFrom md-items=\\\"item in homeCtrl.querySearch(homeCtrl.searchTextFrom) | orderBy: \\'name\\'\\\" md-item-text=item.name md-min-length=0 placeholder=From class=input-autocomplete><md-item-template><span md-highlight-text=homeCtrl.searchTextFrom md-highlight-flags=^i>{{item.name}}</span></md-item-template><md-not-found>No states matching \\\"{{homeCtrl.searchTextFrom}}\\\" were found.</md-not-found></md-autocomplete></div><div><md-autocomplete md-selected-item=homeCtrl.toItem md-search-text=homeCtrl.searchTextTo md-items=\\\"item in homeCtrl.querySearch(homeCtrl.searchTextTo) | orderBy: \\'name\\'\\\" md-item-text=item.name md-min-length=0 placeholder=To class=input-autocomplete><md-item-template><span md-highlight-text=homeCtrl.searchTextTo md-highlight-flags=^i>{{item.name}}</span></md-item-template><md-not-found>No states matching \\\"{{homeCtrl.searchTextTo}}\\\" were found.</md-not-found></md-autocomplete></div><div><md-button class=\\\"md-fab md-mini md-primary\\\" aria-label=search ng-click=homeCtrl.getAnalythics()><md-icon><i class=material-icons>search</i></md-icon></md-button></div></div></form><div layout=row layout-align=\\\"center center\\\"><p class=\\\"padding-right-20 bold\\\">Arraival Delay on:</p><md-radio-group ng-model=homeCtrl.units layout=row ng-change=homeCtrl.changeUnits()><md-radio-button value=minutes class=md-primary>Minutes</md-radio-button><md-radio-button value=ratio class=md-primary>% Ratio (Elapsed time vs Delay)</md-radio-button></md-radio-group></div><div layout=row layout-align=\\\"center center\\\"><p class=\\\"padding-right-20 bold\\\">Analyze per:</p><md-radio-group ng-model=homeCtrl.per layout=row ng-change=homeCtrl.changePer()><md-radio-button value=days class=md-primary>Days of the Month</md-radio-button><md-radio-button value=hours class=md-primary>Departure Hours</md-radio-button></md-radio-group></div><div layout=row layout-align=\\\"center center\\\"><md-switch ng-model=homeCtrl.correlation aria-label=\\\"Switch 1\\\" class=md-primary ng-click=homeCtrl.changeScroll()>Show Correlation Between Distances and Delays</md-switch></div><div ng-class=\\\"{ \\'graph-container\\':homeCtrl.data.length > 0, \\'md-whiteframe-z1\\': homeCtrl.data.length > 0}\\\" ng-if=homeCtrl.chartVisible><nvd3 options=homeCtrl.options data=homeCtrl.data></nvd3></div><div ng-class=\\\"{ \\'graph-container\\':homeCtrl.data2.length > 0, \\'md-whiteframe-z1\\': homeCtrl.data2.length > 0}\\\" ng-if=homeCtrl.correlation id=crr><nvd3 options=homeCtrl.options2 data=homeCtrl.data2></nvd3></div></md-content>\");\n$templateCache.put(\"app/commons/directives/svg-animation/svg-animation.html\",\"<svg class=svg-animation version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=100% height=100% viewBox=\\\"0 80 1000 500\\\" xml:space=preserve><g id=dots><g><circle fill=none stroke-width=5 stroke-miterlimit=10 cx=95.07 cy=108.263 r=12.719 /><circle fill=none stroke-width=5 stroke-miterlimit=10 cx=709.07 cy=515.264 r=10.134 fill=\\\"rgba(240,140,0, 0.45)\\\"/><circle fill=\\\"rgba(240,140,0, 0.45)\\\" stroke-width=5 stroke-miterlimit=10 cx=850.07 cy=265.264 r=4.881 /><circle cx=625.07 cy=199.264 r=10.134 fill=\\\"rgba(240,140,0, 0.45)\\\"/><circle cx=292.07 cy=442.264 r=7.978 fill=\\\"rgba(240,140,0, 0.45)\\\"/></g></g><g id=path><polyline fill=none stroke=#ccc stroke-miterlimit=10 points=\\\"95.07,108.263 292.07,442.264 709.07,515.264\\n      625.07,199.263 850.07,265.263 \t\\\"/></g></svg>\");\n$templateCache.put(\"app/commons/layout/header/header.html\",\"<header><img src=assets/images/real-impact-logo-dark.svg></header>\");}]);"],"sourceRoot":"/source/"}