function Correlation(t,e){this.x=t,this.y=e}function Matrix(){}function DataPoint(t,e){this.x=t,this.y=e}function PolynomialRegression(t,e){this.data=t,this.degree=e,this.matrix=new Matrix,this.leftMatrix=[],this.rightMatrix=[],this.generateLeftMatrix(),this.generateRightMatrix()}!function(){"use strict";angular.module("real-impact",["ngAnimate","ngSanitize","ui.router","ngMaterial","nvd3"])}(),function(){"use strict";function t(){return{templateUrl:"app/commons/layout/header/header.html"}}angular.module("real-impact").directive("headerApp",t)}(),function(){"use strict";function t(){return{templateUrl:"app/commons/directives/svg-animation/svg-animation.html"}}angular.module("real-impact").directive("svgAnimation",t)}(),function(){"use strict";function t(t,e,r,i,a,n,o,s){function l(){r.getAirPorts().then(function(t){v.airports=t}),r.getDistanceDelays("01").then(function(t){v.correlationData=t,d("lineChart")})}function u(t){return t?v.airports.filter(function(e){return e.name.toLowerCase().search(t.toLowerCase())>-1||e.id.toLowerCase().search(t.toLowerCase())>-1}):v.airports}function c(){v.fromItem&&v.fromItem.id&&v.toItem&&v.toItem.id?r.getDelaysOnMonthPer("01",v.per,v.fromItem.id,v.toItem.id,v.units).then(function(t){0===t.length?(v.chartVisible=!1,f("Alert","Not Data Found")):v.chartVisible=!0,r.getDistanceFromTo("01",v.fromItem.id,v.toItem.id).then(function(t){var e="Flight Distance: "+t;e+="mi, with a predicted delay of: "+Math.round(r.getPredictedY(t))+" Minutes",g(e)}),v.currentList=t,v.showOpts={month:p("01"),units:v.units,per:v.per},d("discreteBarChart")}):f("Error","Please select a From and a To Airports")}function m(){v.currentList&&("minutes"===v.units?v.currentList=v.currentList.map(function(t){return t.value=t.delays,t}):v.currentList=v.currentList.map(function(t){return t.value=t.ratios,t}),v.showOpts.units=v.units,d("discreteBarChart"))}function h(){c()}function d(t){if("discreteBarChart"===t){var e=a.discreteBarChart(v.currentList,v.showOpts);v.options=e.options,v.data=e.data}if("lineChart"===t){var e=a.lineChart(v.correlationData);v.options2=e.options,v.data2=e.data}}function p(t){var e=[];return e["01"]="January",e["02"]="February",e["03"]="March",e["04"]="April",e["05"]="May",e["06"]="June",e["07"]="July",e["08"]="August",e["09"]="September",e[10]="October",e[11]="November",e[12]="December",e[t]}function f(t,e){i.show(i.alert().parent(angular.element(document.querySelector(".site"))).clickOutsideToClose(!0).title(t).textContent(e).ariaLabel("Alert Dialog").ok("Got it!"))}function g(t){n.show(n.simple().textContent(t).position("top bottom").hideDelay(0).highlightClass("md-primary").action("CLOSE"))}function y(){e(function(){s.hash("crr"),o()},200)}var v=this;v.airports=[],v.units="minutes",v.per="hours",v.chartVisible=!0,v.initController=l,v.querySearch=u,v.getAnalythics=c,v.changeUnits=m,v.changePer=h,v.changeScroll=y,l()}t.$inject=["$log","$timeout","HistoricFlightsFactory","$mdDialog","GraphBuilderFactory","$mdToast","$anchorScroll","$location"],angular.module("real-impact").controller("HomeController",t)}(),function(){"use strict";function t(t,e){function r(){return t({method:"GET",url:"assets/data/historic-data.json"}).then(function(t){d.data=t.data},function(t){d.data=null})}function i(){return t({method:"GET",url:"assets/data/airports.json"}).then(function(t){d.dataAirports=t.data},function(t){d.dataAirports=null})}function a(){var t=e.defer(),r=[];return d.airports=[],d.data.forEach(function(e,i){e.hasOwnProperty("DEST")&&-1===r.indexOf(e.DEST)&&(r.push(e.DEST),d.airports.push({id:e.DEST,name:n(e.DEST).name})),e.hasOwnProperty("ORIGIN")&&-1===r.indexOf(e.ORIGIN)&&(r.push(e.ORIGIN),d.airports.push({id:e.ORIGIN,name:n(e.ORIGIN).name})),i===d.data.length-1&&t.resolve(d.airports)}),t.promise}function n(t){return d.dataAirports.find(function(e){return e.code===t})}function o(t,r,i,a,n){var o=e.defer();return s(i,a,t).then(function(t){t.length>0?"days"===r?l(t,"FL_DATE").then(function(t){var e,r,i=[];for(var a in t)e=h(t[a].delays),r=h(t[a].ratios),i.push({label:a.split("-")[2],delays:e,ratios:r,value:"minutes"===n?e:r});o.resolve(i)}):l(t,"CRS_DEP_TIME").then(function(t){var e,r,i,a=[];for(var s in t)e=h(t[s].delays),r=h(t[s].ratios),i=s.toString(),i=3===i.length?"0"+i:i,i=i.slice(0,2)+":"+i.slice(2),5==i.length&&a.push({label:i,delays:e,ratios:r,value:"minutes"===n?e:r});o.resolve(a)}):o.resolve([])}),o.promise}function s(t,r,i){var a=e.defer(),n=[];return d.data.forEach(function(e,o){e.ORIGIN===t&&e.DEST===r&&e.FL_DATE.split("-")[1]===i&&n.push(e),o===d.data.length-1&&a.resolve(n)}),a.promise}function l(t,r){var i,a=e.defer(),n={};return t.forEach(function(e,o){i=e[r],n[i]||(n[i]={delays:[],ratios:[]}),n[i].delays.push(e.ARR_DELAY),n[i].ratios.push(e.ARR_DELAY/e.CRS_ELAPSED_TIME*100),o===t.length-1&&a.resolve(n)}),a.promise}function u(t,r){var i=e.defer(),a=[];return d.data.find(function(e,r){if(l=e.DISTANCE,e.FL_DATE.split("-")[1]===t&&(a[l]||(a[l]={delays:[]}),a[l].delays.push(e.ARR_DELAY)),r===d.data.length-1){var n,o=[],s=[];for(var l in a)n=h(a[l].delays),o.push(new DataPoint(parseInt(l),n)),s.push({x:parseInt(l)});d.poly=new PolynomialRegression(o,40),d.terms=d.poly.getTerms();var u=[];s.forEach(function(t,e){u.push({x:t.x,y:d.poly.predictY(d.terms,t.x)}),e===s.length-1&&i.resolve(u)})}}),i.promise}function c(t){return d.poly.predictY(d.terms,t)}function m(t,r,i){var a=e.defer(),n=null;return d.data.forEach(function(e,o){return e.ORIGIN===r&&e.DEST===i&&e.FL_DATE.split("-")[1]===t?(n=e.DISTANCE,a.resolve(n),n):void 0}),a.promise}function h(t){for(var e=0,r=0,i=0;i<t.length;i++)""!==t[i]&&(r++,e+=t[i]);return r>0?e/r:0}var d=this;return d.data=null,d.dataAirports=null,d.airports=null,{initData:r,initDataAirports:i,getAirPorts:a,getDelaysOnMonthPer:o,getDistanceDelays:u,getDistanceFromTo:m,getPredictedY:c}}t.$inject=["$http","$q"],angular.module("real-impact").factory("HistoricFlightsFactory",t)}(),function(){"use strict";function t(){function t(t,e){var i={chart:{type:"discreteBarChart",height:r.height,margin:r.margin,x:function(t){return t.label},y:function(t){return t.value},showValues:!0,valueFormat:function(t){return d3.format(",.0f")(t)+("ratio"===e.units?"%":"")},color:function(t,i){var a="minutes"===e.units?r.maxDelayMinutes:r.maxDelayPercent,n="minutes"===e.units?r.midDelayMinutes:r.midDelayPercent;return t.value>a?r.red:t.value>n?r.yellow:r.green},duration:r.delay,xAxis:{axisLabel:"days"===e.per?"Departure Day":"Departure Hour",axisLabelDistance:10,tickFormat:function(t,r){return"hours"===e.per?r%3===0?t:"":t}},yAxis:{axisLabel:"Arrival Delay "+("minutes"===e.units?"(Minutes)":"Ratio %"),axisLabelDistance:0,tickFormat:function(t,r){return d3.format(",.0f")(t)+("ratio"===e.units?"%":"")}},tooltip:{classes:"graph-tooltip md-whiteframe-z1",valueFormatter:function(t,r){return d3.format(",.0f")(t)+(("minutes"===e.units?" Minutes":"%")+" of arrival delay")},keyFormatter:function(t,r){return"on "+e.month+" "+t}}},title:{enable:!0,text:"Flights arrival delay per departure "+("days"===e.per?"day":"hour")+" on "+e.month,className:"graph-title"},subtitle:{enable:!0,text:"Higher columns means more delay",className:"graph-subtitle"}},a=[{key:"01",values:t}];return{options:i,data:a}}function e(t){var e={chart:{type:"lineChart",height:r.height,margin:r.margin,x:function(t){return t.x},y:function(t){return t.y},useInteractiveGuideline:!0,showLegend:!1,xAxis:{axisLabel:"Distance of Flight"},yAxis:{axisLabel:"Delay in Minutes",tickFormat:function(t){return d3.format(".0f")(t)},axisLabelDistance:-10}},title:{enable:!0,text:"Correlation Between Arrival Delay and Distance",className:"graph-title"},subtitle:{enable:!0,text:"Calculed using a Polynomial Regression",className:"graph-subtitle"}},i=[{values:t,key:"Delay in Minutes: ",color:"rgb(255,152,0)",strokeWidth:2}];return{options:e,data:i}}var r=this;return r.height=450,r.margin={top:40,right:20,bottom:70,left:70},r.maxDelayMinutes=20,r.midDelayMinutes=10,r.maxDelayPercent=15,r.midDelayPercent=8,r.red="#f44336",r.yellow="#ffeb3b",r.green="#4caf50",r.delay=200,{discreteBarChart:t,lineChart:e}}angular.module("real-impact").factory("GraphBuilderFactory",t)}(),Correlation.prototype.correlationCoefficient=function(){return this.diffFromAvg()/Math.sqrt(this.diffFromAvgSqrd(X)*this.diffFromAvgSqrd(Y))},Correlation.prototype.avg=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e/t.length},Correlation.prototype.stdv=function(t){return Math.sqrt(this.diffFromAvgSqrd(t)/(t.length-1))},Correlation.prototype.b0=function(){return this.avg(this.y)-this.b1()*this.avg(this.x)},Correlation.prototype.b1=function(){return this.diffFromAvg()/this.diffFromAvgSqrd(X)},Correlation.prototype.diffFromAvg=function(){for(var t=0,e=0;e<this.x.length;e++)t+=(this.x[e]-this.avg(x))*(y[e]-this.avg(y));return t},Correlation.prototype.diffFromAvgSqrd=function(t){for(var e=0,r=0;r<t.length;r++)e+=Math.pow(t[r]-this.avg(t),2);return e},Correlation.prototype.sumList=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e},Correlation.prototype.sumSquares=function(t){for(var e=0,r=0;r<t.length;r++)e+=Math.pow(t[r],2);return e},Correlation.prototype.sumXTimesY=function(){for(var t=0,e=0;e<this.x.length;e++)t+=this.y[e]*this.x[e];return t},Correlation.prototype.linearRegression=function(t){return this.b1()*t+this.b0()},Matrix.prototype.backwardSubstitution=function(t,e,r,i){if(0>r||0>i)return e;for(var a=t.length,n=t[0].length-1,o=0,s=0,l=n-1;l>=i;l--)l==i?o=t[r][n]/t[r][l]:(t[r][n]-=t[r][l]*e[a-1-s],s++);return e[r]=o,this.backwardSubstitution(t,e,r-1,i-1)},Matrix.prototype.combineMatrices=function(t,e){for(var r=e.length,i=t[0].length,a=[],n=0;r>n;n++){a.push([]);for(var o=0;i>=o;o++)o==i?a[n][o]=e[n]:a[n][o]=t[n][o]}return a},Matrix.prototype.forwardElimination=function(t){for(var e=t.length,r=t[0].length,i=[],a=0;e>a;a++){i.push([]);for(var n=0;r>n;n++)i[a][n]=t[a][n]}for(var o=0;e-1>o;o++)for(var s=o;e-1>s;s++)for(var l=i[s+1][o],u=i[o][o],c=l/u,a=0;r>a;a++)i[s+1][a]=i[s+1][a]-c*i[o][a];return i},Matrix.prototype.gaussianJordanElimination=function(t,e){var r=this.combineMatrices(t,e),i=this.forwardElimination(r);return this.backwardSubstitution(i,[],i.length-1,i[0].length-2)},Matrix.prototype.identityMatrix=function(t){for(var e=t.length,r=t[0].length,i=[[]],a=0;e>a;a++)for(var n=0;r>n;n++)n==a?i[a][n]=1:i[a][n]=0;return i},Matrix.prototype.matrixProduct=function(t,e){var r=t[0].length,i=e.length;if(r!=i)return!1;for(var a=[[]],n=0;i>n;n++)for(var o=0;r>o;o++)a[n][o]=this.doMultiplication(t,e,n,o,r);return a},Matrix.prototype.doMultiplication=function(t,e,r,i,a){for(var n=0,o=0;a>n;)o+=t[r][n]*e[n][i],n++;return o},Matrix.prototype.multiplyRow=function(t,e,r){for(var i=t.length,a=t[0].length,n=[[]],o=0;i>o;o++)for(var s=0;a>s;s++)o==e?n[o][s]=t[o][s]*r:n[o][s]=t[o][s];return n},PolynomialRegression.prototype.sumX=function(t,e){for(var r=0,i=0;i<t.length;i++)r+=Math.pow(t[i].x,e);return r},PolynomialRegression.prototype.sumXTimesY=function(t,e){for(var r=0,i=0;i<t.length;i++)r+=Math.pow(t[i].x,e)*t[i].y;return r},PolynomialRegression.prototype.sumY=function(t,e){for(var r=0,i=0;i<t.length;i++)r+=Math.pow(t[i].y,e);return r},PolynomialRegression.prototype.generateLeftMatrix=function(){for(var t=0;t<=this.degree;t++){this.leftMatrix.push([]);for(var e=0;e<=this.degree;e++)0===t&&0===e?this.leftMatrix[t][e]=this.data.length:this.leftMatrix[t][e]=this.sumX(this.data,t+e)}},PolynomialRegression.prototype.generateRightMatrix=function(){for(var t=0;t<=this.degree;t++)0===t?this.rightMatrix[t]=this.sumY(this.data,1):this.rightMatrix[t]=this.sumXTimesY(this.data,t)},PolynomialRegression.prototype.getTerms=function(){return this.matrix.gaussianJordanElimination(this.leftMatrix,this.rightMatrix)},PolynomialRegression.prototype.predictY=function(t,e){for(var r=0,i=t.length-1;i>=0;i--)r+=0==i?t[i]:t[i]*Math.pow(e,i);return r},function(){"use strict";function t(t){t.debug("Run Real-impact...")}t.$inject=["$log"],angular.module("real-impact").run(t)}(),function(){"use strict";function t(t,e){t.state("home",{url:"/",templateUrl:"app/states/home/home.html",controller:"HomeController",controllerAs:"homeCtrl",resolve:{initData:["HistoricFlightsFactory",function(t){return t.initData()}],initDataAirtports:["HistoricFlightsFactory",function(t){return t.initDataAirports()}]}}),e.otherwise("/")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("real-impact").config(t)}(),function(){"use strict";angular.module("real-impact").constant("SITE_NAME","Real Impact")}(),function(){"use strict";function t(t,e){var r=e.extendPalette("orange",{contrastDefaultColor:"light"});e.definePalette("myStyle",r),e.theme("default").primaryPalette("myStyle"),t.debugEnabled(!0)}t.$inject=["$logProvider","$mdThemingProvider"],angular.module("real-impact").config(t)}(),angular.module("real-impact").run(["$templateCache",function(t){t.put("app/states/home/home.html",'<md-content class="md-padding home-view"><form ng-submit=$event.preventDefault() class=main-form><div layout=row layout-align="center center"><div><md-autocomplete md-selected-item=homeCtrl.fromItem md-search-text=homeCtrl.searchTextFrom md-items="item in homeCtrl.querySearch(homeCtrl.searchTextFrom) | orderBy: \'name\'" md-item-text=item.name md-min-length=0 placeholder=From class=input-autocomplete><md-item-template><span md-highlight-text=homeCtrl.searchTextFrom md-highlight-flags=^i>{{item.name}}</span></md-item-template><md-not-found>No states matching "{{homeCtrl.searchTextFrom}}" were found.</md-not-found></md-autocomplete></div><div><md-autocomplete md-selected-item=homeCtrl.toItem md-search-text=homeCtrl.searchTextTo md-items="item in homeCtrl.querySearch(homeCtrl.searchTextTo) | orderBy: \'name\'" md-item-text=item.name md-min-length=0 placeholder=To class=input-autocomplete><md-item-template><span md-highlight-text=homeCtrl.searchTextTo md-highlight-flags=^i>{{item.name}}</span></md-item-template><md-not-found>No states matching "{{homeCtrl.searchTextTo}}" were found.</md-not-found></md-autocomplete></div><div><md-button class="md-fab md-mini md-primary" aria-label=search ng-click=homeCtrl.getAnalythics()><md-icon><i class=material-icons>search</i></md-icon></md-button></div></div></form><div layout=row layout-align="center center"><p class="padding-right-20 bold">Arraival Delay on:</p><md-radio-group ng-model=homeCtrl.units layout=row ng-change=homeCtrl.changeUnits()><md-radio-button value=minutes class=md-primary>Minutes</md-radio-button><md-radio-button value=ratio class=md-primary>% Ratio (Elapsed time vs Delay)</md-radio-button></md-radio-group></div><div layout=row layout-align="center center"><p class="padding-right-20 bold">Analyze per:</p><md-radio-group ng-model=homeCtrl.per layout=row ng-change=homeCtrl.changePer()><md-radio-button value=days class=md-primary>Days of the Month</md-radio-button><md-radio-button value=hours class=md-primary>Departure Hours</md-radio-button></md-radio-group></div><div layout=row layout-align="center center"><md-switch ng-model=homeCtrl.correlation aria-label="Switch 1" class=md-primary ng-click=homeCtrl.changeScroll()>Show Correlation Between Distances and Delays</md-switch></div><div ng-class="{ \'graph-container\':homeCtrl.data.length > 0, \'md-whiteframe-z1\': homeCtrl.data.length > 0}" ng-if=homeCtrl.chartVisible><nvd3 options=homeCtrl.options data=homeCtrl.data></nvd3></div><div ng-class="{ \'graph-container\':homeCtrl.data2.length > 0, \'md-whiteframe-z1\': homeCtrl.data2.length > 0}" ng-if=homeCtrl.correlation id=crr><nvd3 options=homeCtrl.options2 data=homeCtrl.data2></nvd3></div></md-content>'),t.put("app/commons/directives/svg-animation/svg-animation.html",'<svg class=svg-animation version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=100% height=100% viewBox="0 80 1000 500" xml:space=preserve><g id=dots><g><circle fill=none stroke-width=5 stroke-miterlimit=10 cx=95.07 cy=108.263 r=12.719 /><circle fill=none stroke-width=5 stroke-miterlimit=10 cx=709.07 cy=515.264 r=10.134 fill="rgba(240,140,0, 0.45)"/><circle fill="rgba(240,140,0, 0.45)" stroke-width=5 stroke-miterlimit=10 cx=850.07 cy=265.264 r=4.881 /><circle cx=625.07 cy=199.264 r=10.134 fill="rgba(240,140,0, 0.45)"/><circle cx=292.07 cy=442.264 r=7.978 fill="rgba(240,140,0, 0.45)"/></g></g><g id=path><polyline fill=none stroke=#ccc stroke-miterlimit=10 points="95.07,108.263 292.07,442.264 709.07,515.264\n      625.07,199.263 850.07,265.263 	"/></g></svg>'),t.put("app/commons/layout/header/header.html","<header><img src=assets/images/real-impact-logo-dark.svg></header>")}]);
//# sourceMappingURL=../maps/scripts/app-5f4cd49ccb.js.map
